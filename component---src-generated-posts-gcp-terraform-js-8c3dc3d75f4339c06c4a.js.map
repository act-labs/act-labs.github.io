{"version":3,"sources":["webpack:///./src/content/posts/gcp-terraform.md","webpack:///./src/generated/posts/gcp-terraform.js","webpack:///./src/actb/seo.js","webpack:///./src/actb/logo.js","webpack:///./src/actb/footer.js","webpack:///./src/actb/navigation-bar.js","webpack:///./src/actb/layout/index.js","webpack:///./src/actb/code.js","webpack:///./src/actb/mdx.js","webpack:///./src/components/page-layout.js"],"names":["MDXContent","props","_this","_React$Component","call","this","layout","render","_this$props","components","objectWithoutPropertiesLoose_default","react_default","a","createElement","dist","name","parentName","className","href","title","React","Component","SnippetsLayout","page_layout","gcp_terraform_MDXContent","__webpack_require__","d","__webpack_exports__","SEO","_ref","description","lang","meta","keywords","react__WEBPACK_IMPORTED_MODULE_2___default","gatsby__WEBPACK_IMPORTED_MODULE_5__","query","detailsQuery","data","split","map","v","trim","site","siteMetadata","react_helmet__WEBPACK_IMPORTED_MODULE_4___default","htmlAttributes","titleTemplate","project","content","property","author","concat","join","_public_static_d_304502870_json__WEBPACK_IMPORTED_MODULE_1__","defaultProps","propTypes","PropTypes","string","array","oneOfType","arrayOf","isRequired","Logo","gatsby__WEBPACK_IMPORTED_MODULE_3__","gatsby_image__WEBPACK_IMPORTED_MODULE_4___default","fixed","logo","childImageSharp","style","float","_public_static_d_2369744027_json__WEBPACK_IMPORTED_MODULE_1__","Footer","ActFooter","social","copyright","icons","_ref2","link","icon","actb_link","key","to","icon_default","type","fontSize","marginLeft","color","textAlign","SiteFooter","gatsby_browser_entry","_ref3","_ref3$config","config","Object","assign","_2743462859","Header","NavigationBar","nav","menu_default","theme","mode","defaultSelectedKeys","filter","selected","text","lineHeight","i","slug","Item","SiteNavigationBar","_1250442554","Content","Sider","Panel","children","other","padding","PageLayout","_Object$assign","defaultLayoutOptions","footer","fullHeight","layoutStyle","height","pageClassName","layout_default","seo","SideMenuPanel","menu","background","minHeight","width","SyntaxHighlighter","registerLanguage","js","bash","markdown","yaml","dockerfile","defaults","code","length","light","language","MDX","actb_src_actb_layout__WEBPACK_IMPORTED_MODULE_2__","DefaultSiteLayout","pageContext","context","frontmatter","react__WEBPACK_IMPORTED_MODULE_3___default","paddingTop","actb_src_actb_mdx__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"component---src-generated-posts-gcp-terraform-js-8c3dc3d75f4339c06c4a.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nconst layoutProps = {};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = null;\n  }\n\n  render() {\n    const {\n      components,\n      ...props\n    } = this.props;\n    return <MDXTag name=\"wrapper\" components={components}><MDXTag name=\"p\" components={components}>{`Despite popularity of serverless and Kubernetes, ordinary virtual machines could be handy for development, bulky workloads, small applications, databases or inherently scalable applications like Kafka. Google provides API enabling developers to quickly spin up machines of many types, ranging from micro instances to multi-processor or GPU enabled boxes. Working with Google APIs directly could be quite cumbersome, but luckily there are tools which are able to do heavy lifting for us. Terraform is one of the most popular tools, allowing to treat infrastructure as a code, and thus providing a higher level of abstraction. Its declarative configuration syntax allows to describe desirable cloud infrastructure in a concise, human readable fashion. The tool is then able to create required cloud resources and saves the recent state of infrastructure (existing infrastructure could be imported as well). Later, upon request, Terraform is able to update the state of your cloud infrastructure smartly, or can destroy it completely. Lets look at how Terraform configuration may look like for GCP compute instances.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`VPC`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Before creating compute instances we may wish to create our private network. VPCs allow to divide cloud infrastructure into subnets and configure external access using firewall rules. Suppose we wish to create multiple web servers. Then VPC could be configured to allow SSH access, HTTP requests and pings:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-sh\"\n        }}>{`// Create VPC\nresource \"google_compute_network\" \"vpc\" {\n name                    = \"\\${var.project_name}-vpc\"\n auto_create_subnetworks = false\n}\n\n// Create Subnet\nresource \"google_compute_subnetwork\" \"app\" {\n name          = \"\\${var.project_name}-app-subnet\"\n ip_cidr_range = var.subnet_cidr\n network       = \"\\${var.project_name}-vpc\"\n depends_on    = [google_compute_network.vpc]\n region        = var.region\n}\n\n// VPC firewall configuration\nresource \"google_compute_firewall\" \"firewall\" {\n  name    = \"\\${var.project_name}-firewall\"\n  network = google_compute_network.vpc.name\n\n  allow {\n    protocol = \"icmp\"\n  }\n\n  allow {\n    protocol = \"tcp\"\n    ports    = [\"22\"]\n  }\n\n  allow {\n    protocol = \"tcp\"\n    ports    = [\"80\", \"8080\", \"1000-9000\"]\n  }\n\n  source_tags = [\"web\"]\n\n  source_ranges = [\"0.0.0.0/0\"]\n}\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Terraform, has the notion of variables, which are usually defined in a separate `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`variables.tf`}</MDXTag>{` file. Default variable values could be overridden using JSON files, environment variables or during module invocation. Variables make configuration flexible and reusable.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Google compute instances`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Although Terraform configuration is declarative and human readable, it has quite powerful control flow constructs, for example, supporting arrays and iterations. Thanks to this, multiple web servers could be created (see `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`count`}</MDXTag>{` property assignment):`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-sh\"\n        }}>{`resource \"google_compute_instance\" \"webservers\" {\n  count                     = length(var.webservers)\n  name                      = \"\\${var.project_name}-web-\\${count.index}\"\n  machine_type              = var.webservers[count.index].type\n  zone                      = var.zone\n\n  tags = [\"http-server\", \"https-server\", var.webservers[count.index].name]\n\n  service_account {\n    scopes = var.scopes_default_web\n  }\n\n  metadata_startup_script = \"sudo apt-get update; sudo apt-get install -yq build-essential python-pip rsync; pip install flask\"\n\n  network_interface {\n    subnetwork = google_compute_subnetwork.app.self_link\n    access_config {\n      // Ephemeral IP\n    }\n  }\n\n  boot_disk {\n    initialize_params {\n      image = var.webservers[count.index].image\n    }\n  }\n}\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Here variable `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`webservers`}</MDXTag>{` (referenced as `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`var.webservers`}</MDXTag>{`) is an array of objects containing server parameters. Providing such an array, one may create as many servers as he wish (even none at all).`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Using `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`metadata_startup_script`}</MDXTag>{` argument, multiple python packages could be installed. A `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`metadata_startup_script`}</MDXTag>{` (as any Terraform string type argument) could be a multiline string, so, using this method, a fully functional server could be provisioned using, for example, some docker containers. Or we may setup compute instances manually or using tools like Ansible.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Finally to get access to the running servers, we need their IP addresses. To obtain them define outputs:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-sh\"\n        }}>{`output \"webserver_ip_addresses\" {\n value = {\n      for webserver in google_compute_instance.webservers:\n        webserver.instance_id => webserver.network_interface.0.access_config.0.nat_ip\n   }\n}\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`SSH keys`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`To simplify maintenance, ssh keys could be generated for later upload to GCP:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-sh\"\n        }}>{`# first, generate ssh keys\nssh-keygen -t rsa -f ssh-key -C admin\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Using Terraform `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`file`}</MDXTag>{` function, generated file now could be uploaded to GCP (for flexibility, location of the public key file is defined in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ssh_pub_key_file`}</MDXTag>{` variable):`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-sh\"\n        }}>{`resource \"google_compute_project_metadata_item\" \"ssh-keys\" {\n  project     = var.gcp_project\n  key   = \"ssh-keys\"\n  value = \"\\${var.ssh_user}:\\${file(var.ssh_pub_key_file)}\"\n}\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`When configuration is ready, it is possible to verify, apply or preview it using commands like `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terraform verify`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terraform apply`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terraform plan`}</MDXTag>{`. After infrastructure is finally created, one may test correctness of the setup manually, using, for example, simple Hello World python application:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-python\"\n        }}>{`from flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef hello_cloud():\n   return 'Hello GCP!'\n\napp.run(host='0.0.0.0')\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`To test our setup, login to server, save the above snippet into `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`app.py`}</MDXTag>{` file, start web application, and finally test it using IP address of the server from Terraform output:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-sh\"\n        }}>{`# login:\nssh -i ssh-key admin@XX.XXX.249.234\n\n# save and start simple Flask server:\npython app.py\n\n# test accessibility:\ncurl http://XX.XXX.249.234:5000\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Source code`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Thanks to Terraform, in a matter of seconds, one may easily spin up new virtual machines (`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terraform apply`}</MDXTag>{`) or destroy unused cloud resources (`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terraform destroy`}</MDXTag>{`). Take the `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://github.com/act-labs/gcp-terraform\",\n          \"title\": \"Terraform configuration to create Google VPC, compute instances and SSH keys\"\n        }}>{`code`}</MDXTag>{` on Github and give it a spin.`}</MDXTag>\n           </MDXTag>;\n  }\n\n}\nexport const _frontmatter = {\n  \"title\": \"Create GCP instances and VPC using Terraform\",\n  \"keywords\": \"Terraform, Google VPC, GCP SSH keys, GCP\",\n  \"order\": -40\n};\n    ","import React from \"react\";\r\nimport ContentComponent from 'D:/projects/flash/packages/act-labs-blog/src/content/posts/gcp-terraform.md';\r\nimport OneColumnLayout from 'components/page-layout';\r\n\r\nexport default function SnippetsLayout(props) {\r\n    return <OneColumnLayout {...props}><ContentComponent {...props}/></OneColumnLayout>\r\n}\r\n\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Helmet from 'react-helmet'\r\nimport { StaticQuery, graphql } from 'gatsby'\r\n\r\nfunction SEO({ description, lang, meta, keywords, title }) {\r\n  return (\r\n    <StaticQuery\r\n      query={detailsQuery}\r\n      render={data => {\r\n        if (typeof keywords == \"string\"){\r\n          keywords = keywords.split(\",\").map(v => v.trim());\r\n        }\r\n        description = description || data.site.siteMetadata.description\r\n        return (\r\n          <Helmet\r\n            htmlAttributes={{\r\n              lang,\r\n            }}\r\n            title={title}\r\n            titleTemplate={`%s | ${data.site.siteMetadata.project}`}\r\n            meta={[\r\n              {\r\n                name: 'description',\r\n                content: description,\r\n              },\r\n              {\r\n                property: 'og:title',\r\n                content: title,\r\n              },\r\n              {\r\n                property: 'og:description',\r\n                content: description,\r\n              },\r\n              {\r\n                property: 'og:type',\r\n                content: 'website',\r\n              },\r\n              {\r\n                name: 'twitter:card',\r\n                content: 'summary',\r\n              },\r\n              {\r\n                name: 'twitter:creator',\r\n                content: data.site.siteMetadata.author,\r\n              },\r\n              {\r\n                name: 'twitter:title',\r\n                content: title,\r\n              },\r\n              {\r\n                name: 'twitter:description',\r\n                content: description,\r\n              },\r\n            ]\r\n              .concat(\r\n                keywords\r\n                  ? {\r\n                      name: 'keywords',\r\n                      content: keywords.join(', '),\r\n                    }\r\n                  : []\r\n              )\r\n              .concat(meta)}\r\n          />\r\n        )\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nSEO.defaultProps = {\r\n  lang: 'en',\r\n  meta: [],\r\n  keywords: null,\r\n}\r\n\r\nSEO.propTypes = {\r\n  description: PropTypes.string,\r\n  lang: PropTypes.string,\r\n  meta: PropTypes.array,\r\n  keywords: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.arrayOf(PropTypes.string)\r\n  ]),\r\n  title: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default SEO\r\n\r\nconst detailsQuery = graphql`\r\n  query DefaultSEOQuery {\r\n    site {\r\n      siteMetadata {\r\n        project\r\n        description\r\n        author\r\n      }\r\n    }\r\n  }\r\n`\r\n","import React from 'react'\r\nimport { StaticQuery, graphql } from 'gatsby'\r\nimport Img from 'gatsby-image'\r\n\r\n\r\nexport default function Logo(){\r\n        return (<StaticQuery\r\n            query={graphql`\r\n                query {\r\n                    logo: file(relativePath: { eq: \"logo.png\" }) {\r\n                    childImageSharp {\r\n                        fixed(height: 60) {\r\n                        ...GatsbyImageSharpFixed\r\n                        }\r\n                    }\r\n                    }\r\n                }\r\n            `}\r\n            render={data => <Img fixed={data.logo.childImageSharp.fixed} style={{float:\"left\"}}/>}\r\n        />)\r\n    }\r\n\r\n","import React from \"react\"\r\nimport { StaticQuery, graphql } from 'gatsby'\r\n\r\nimport {Link} from \"actb\";\r\nimport {\r\n    Layout, Icon\r\n  } from 'antd';\r\n  \r\n  const {\r\n    Footer\r\n  } = Layout;\r\n\r\n\r\nexport function ActFooter({social, copyright}){\r\n    const icons = social.map(({link, icon})=><Link key={icon} to={link}><Icon type={icon}  style={{ fontSize: '24px', marginLeft:10, color: 'rgba(0, 0, 0, 0.65)'}} /></Link>)\r\n    return (\r\n        <Footer style={{ textAlign: 'center' }}>\r\n            <div>{copyright}<div style={{float:\"right\"}}>{icons}</div></div>\r\n        </Footer>\r\n    )\r\n}\r\n\r\nexport default function SiteFooter(props){\r\n  if (props.social){\r\n      return <ActFooter {...props}/>\r\n  }\r\n  return <StaticQuery\r\n  query={graphql`\r\n    query {\r\n      config: configYaml(fields:{slug: {eq:\"/config/main/\"}}){\r\n          copyright\r\n          social {\r\n              icon\r\n              link\r\n          }        \r\n      }\r\n    }\r\n  `}\r\n  render={({config:{social, copyright}}) => <ActFooter social={social} copyright={copyright} {...props} />}\r\n/>\r\n}  ","import React from \"react\";\r\nimport {Logo, Link} from \"actb\"\r\nimport { StaticQuery, graphql } from 'gatsby'\r\n\r\nimport {\r\n  Layout, Menu\r\n} from 'antd';\r\n  \r\nconst {\r\n  Header\r\n} = Layout;\r\n\r\n\r\nexport function NavigationBar({nav}){  \r\n    return (\r\n      <Header className=\"navigation-bar\">\r\n        <Link to=\"/\" ><Logo/></Link>\r\n        <Menu\r\n            theme=\"dark\"\r\n            mode=\"horizontal\"\r\n            defaultSelectedKeys={ nav.filter(v=>v.selected).map(v=>v.text) }\r\n            style={{ lineHeight: '64px' }}\r\n        >\r\n          {\r\n            nav.map(({slug, text}, i)=>\r\n              <Menu.Item key={i}>\r\n                <Link to={slug || \"/\"} >{text}</Link>\r\n              </Menu.Item>\r\n            )\r\n          }  \r\n        </Menu>\r\n      </Header>\r\n    )\r\n} \r\n\r\nexport default function SiteNavigationBar(props){\r\n    if (props.nav){\r\n        return <NavigationBar {...props}/>\r\n    }\r\n    return <StaticQuery\r\n    query={graphql`\r\n      query {\r\n        config: configYaml(fields:{slug: {eq:\"/config/main/\"}}){\r\n            nav {\r\n                text\r\n                slug\r\n            }        \r\n        }\r\n      }\r\n    `}\r\n    render={({config:{nav}}) => <NavigationBar nav={nav} {...props} />}\r\n  />\r\n}  ","import React from \"react\"\r\n\r\nimport {Seo, Footer, NavigationBar} from \"actb\";\r\n\r\nimport {\r\n    Layout\r\n  } from 'antd';\r\n  \r\nimport \"./layout.less\"\r\n\r\nconst {\r\n  Content, Sider\r\n} = Layout;\r\n\r\n\r\nexport function Panel(props){\r\n  const {style, children, ...other} = props\r\n    return (\r\n        <Content style={Object.assign({ padding: '5px 24px' }, style)} {...other}>\r\n            {children}                     \r\n        </Content>\r\n    )\r\n}\r\n\r\nexport function SideMenuPanel({children, menu}){\r\n    return (\r\n      <Layout style={{ padding: '1em 0', background: '#fff', minHeight: 1000 }}>\r\n        <Sider width={200}>\r\n          {menu}\r\n        </Sider>\r\n        <Panel>{children}</Panel>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\nexport default function PageLayout(props){\r\n  const {children, className, \r\n    title, description, keywords, style, layout} = props\r\n  const {footer, fullHeight} = Object.assign({}, defaultLayoutOptions, layout)\r\n  const layoutStyle = Object.assign({}, fullHeight?{height:\"100%\"}:null, style)\r\n  const pageClassName = (className? className + \" \" : \"\") + \"page-layout\"\r\n  return (\r\n    <Layout className={pageClassName} style={layoutStyle}>\r\n      <Seo title={title} keywords={keywords} description={description} />\r\n      <NavigationBar/>\r\n        {children}\r\n      {footer? <Footer/>:null}\r\n    </Layout>\r\n  );  \r\n}\r\n\r\nconst defaultLayoutOptions = {\r\n  footer: true\r\n}\r\n\r\nPageLayout.Panel = Panel;\r\nPageLayout.SideMenuPanel = SideMenuPanel; \r\n","import React from \"react\";\r\nimport { Light as SyntaxHighlighter } from \"react-syntax-highlighter\";\r\nimport js from 'react-syntax-highlighter/dist/esm/languages/hljs/javascript';\r\nimport bash from 'react-syntax-highlighter/dist/esm/languages/hljs/bash';\r\nimport markdown from 'react-syntax-highlighter/dist/esm/languages/hljs/markdown';\r\nimport yaml from 'react-syntax-highlighter/dist/esm/languages/hljs/yaml';\r\nimport dockerfile from 'react-syntax-highlighter/dist/esm/languages/hljs/dockerfile';\r\n\r\nimport { github as style } from 'react-syntax-highlighter/dist/styles/hljs';\r\n\r\nSyntaxHighlighter.registerLanguage('javascript', js);\r\nSyntaxHighlighter.registerLanguage('sh', bash);\r\nSyntaxHighlighter.registerLanguage('markdown', markdown);\r\nSyntaxHighlighter.registerLanguage('yaml', yaml);\r\nSyntaxHighlighter.registerLanguage('dockerfile', dockerfile);\r\n\r\nexport {SyntaxHighlighter};\r\n\r\nexport default function Code(props) {\r\n    let lang = 'bash'\r\n    if (props.className){\r\n      const name = props.className.split(\"-\");\r\n      if (name.length > 1){\r\n        lang = name[1]\r\n      }\r\n    }\r\n  \r\n    return <SyntaxHighlighter language={lang} style={style}>{props.children}</SyntaxHighlighter>\r\n}","import React from \"react\";\r\nimport { MDXProvider } from '@mdx-js/tag';\r\n\r\nimport {Code, Link} from \"actb\";\r\n\r\nexport const components = {\r\n    code: Code,\r\n    a: Link\r\n  };\r\n  \r\nconst defaults = {components}; \r\n\r\nexport default function MDX(props){\r\n    const {components, children} = Object.assign({}, defaults, props);\r\n\r\n    return (\r\n    <MDXProvider components={components}>\r\n        {children}\r\n    </MDXProvider>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nimport {Mdx, Layout} from \"actb\"\r\nimport '../actb/layout/simple.css'\r\n\r\nconst Panel = Layout.Panel\r\n\r\nexport default function DefaultSiteLayout({children, pageContext}){\r\n  const context = Object.assign({frontmatter:{}}, pageContext)\r\n  const props = Object.assign({}, {layout:context.layout}, context.frontmatter);\r\n  return (\r\n    <Layout {...props}>\r\n      <Panel style={{ paddingTop: \"1em\"}}>\r\n        {props.title? <h1>{props.title}</h1>:null}\r\n        <Mdx>{children}</Mdx>\r\n      </Panel>\r\n    </Layout>\r\n  )\r\n}\r\n\r\n\r\n"],"sourceRoot":""}