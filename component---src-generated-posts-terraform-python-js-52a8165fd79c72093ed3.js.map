{"version":3,"sources":["webpack:///./src/content/posts/terraform-python.md","webpack:///./src/generated/posts/terraform-python.js","webpack:///./src/actb/seo.js","webpack:///./src/actb/logo.js","webpack:///./src/actb/footer.js","webpack:///./src/actb/navigation-bar.js","webpack:///./src/actb/layout/index.js","webpack:///./src/actb/code.js","webpack:///./src/actb/mdx.js","webpack:///./src/components/page-layout.js"],"names":["MDXContent","props","_this","_React$Component","call","this","layout","render","_this$props","components","objectWithoutPropertiesLoose_default","react_default","a","createElement","dist","name","parentName","href","className","title","React","Component","SnippetsLayout","page_layout","terraform_python_MDXContent","__webpack_require__","d","__webpack_exports__","SEO","_ref","description","lang","meta","keywords","react__WEBPACK_IMPORTED_MODULE_2___default","gatsby__WEBPACK_IMPORTED_MODULE_5__","query","detailsQuery","data","split","map","v","trim","site","siteMetadata","react_helmet__WEBPACK_IMPORTED_MODULE_4___default","htmlAttributes","titleTemplate","project","content","property","author","concat","join","_public_static_d_304502870_json__WEBPACK_IMPORTED_MODULE_1__","defaultProps","propTypes","PropTypes","string","array","oneOfType","arrayOf","isRequired","Logo","gatsby__WEBPACK_IMPORTED_MODULE_3__","gatsby_image__WEBPACK_IMPORTED_MODULE_4___default","fixed","logo","childImageSharp","style","float","_public_static_d_2369744027_json__WEBPACK_IMPORTED_MODULE_1__","Footer","ActFooter","social","copyright","icons","_ref2","link","icon","actb_link","key","to","icon_default","type","fontSize","marginLeft","color","textAlign","SiteFooter","gatsby_browser_entry","_ref3","_ref3$config","config","Object","assign","_2743462859","Header","NavigationBar","nav","menu_default","theme","mode","defaultSelectedKeys","filter","selected","text","lineHeight","i","slug","Item","SiteNavigationBar","_1250442554","Content","Sider","Panel","children","other","padding","PageLayout","_Object$assign","defaultLayoutOptions","footer","fullHeight","layoutStyle","height","pageClassName","layout_default","seo","SideMenuPanel","menu","background","minHeight","width","SyntaxHighlighter","registerLanguage","js","bash","markdown","yaml","dockerfile","defaults","code","length","light","language","MDX","actb_src_actb_layout__WEBPACK_IMPORTED_MODULE_2__","DefaultSiteLayout","pageContext","context","frontmatter","react__WEBPACK_IMPORTED_MODULE_3___default","paddingTop","actb_src_actb_mdx__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"+JAKqBA,cACnB,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MACKC,OAAS,KAFGJ,8BAKnBK,OAAA,WAAS,IAAAC,EAIHH,KAAKJ,MAFPQ,EAFKD,EAELC,WAFKC,IAAAF,EAAA,gBAKP,OAAOG,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,UAAUN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,ugDACpDE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,KAAKN,WAAYA,GAA9B,4BACAE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,yTAAmWE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,EAAYO,WAAW,IAAIf,MAAO,CAC9ZgB,KAAQ,0CADuV,eAAnW,+EAGAN,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,MAAMN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,OAAON,WAAYA,EAAYO,WAAW,MAAMf,MAAO,CAC3GiB,UAAa,oBAD0B,uHAQ3CP,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,qKACAE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,KAAKN,WAAYA,GAA9B,8BACAE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,ogBAA8iBE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,WAA9iB,sCAA0qBL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,kBAA1qB,KACAL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,MAAMN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,OAAON,WAAYA,EAAYO,WAAW,MAAMf,MAAO,CAC3GiB,UAAa,kBAD0B,0NAW3CP,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,iBAA2DE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,kBAA3D,0FAAkPL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,KAAKN,WAAYA,EAAYO,WAAW,KAArD,UAAlP,mKAAkeL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,EAAYO,WAAW,IAAIf,MAAO,CAC7hBgB,KAAQ,+CACRE,MAAS,qCAFqd,eAAle,MAIAR,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,MAAMN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,OAAON,WAAYA,EAAYO,WAAW,MAAMf,MAAO,CAC3GiB,UAAa,oBAD0B,8FAM3CP,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,KAAKN,WAAYA,GAA9B,sCACAE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,6EAAuHE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,SAAvH,0EAAqRL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,WAArR,+PACAL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,MAAMN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,OAAON,WAAYA,EAAYO,WAAW,MAAMf,MAAO,CAC3GiB,UAAa,oBAD0B,ihDA6C3CP,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,KAAKN,WAAYA,GAA9B,oCACAE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,6EAAuHE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,cAAvH,WACAL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,MAAMN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,OAAON,WAAYA,EAAYO,WAAW,MAAMf,MAAO,CAC3GiB,UAAa,oBAD0B,olBA6B3CP,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,cAAzC,oCAAsKL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,UAAtK,QAAmQL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,QAAnQ,gBAAsWL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,QAAtW,qBAA8cL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,YAA9c,mCAAwkBL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,UAAxkB,wEAAquBL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,kBAAruB,qFAAu5BL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,iCAAv5B,yCACAL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,MAAMN,WAAYA,GAAYE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,OAAON,WAAYA,EAAYO,WAAW,MAAMf,MAAO,CAC3GiB,UAAa,oBAD0B,gqCAwC3CP,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,KAAKN,WAAYA,GAA9B,2BACAE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,4OAAsRE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,UAAtR,QAAmXL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,aAAaN,WAAYA,EAAYO,WAAW,KAA7D,UAAnX,gFACAL,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,GAA7B,6CAAuFE,EAAAC,EAAAC,cAACC,EAAA,OAAD,CAAQC,KAAK,IAAIN,WAAYA,EAAYO,WAAW,IAAIf,MAAO,CAClJgB,KAAQ,+CACRE,MAAS,qCAF0E,UAAvF,UAzKkCC,IAAMC,oBCD/B,SAASC,EAAerB,GACnC,OAAOU,EAAAC,EAAAC,cAACU,EAAA,EAAoBtB,EAAOU,EAAAC,EAAAC,cAACW,EAAqBvB,IAL7DwB,EAAAC,EAAAC,EAAA,4BAAAL,mHCKA,SAASM,EAATC,GAA2D,IAA5CC,EAA4CD,EAA5CC,YAAaC,EAA+BF,EAA/BE,KAAMC,EAAyBH,EAAzBG,KAAMC,EAAmBJ,EAAnBI,SAAUd,EAASU,EAATV,MAChD,OACEe,EAAAtB,EAAAC,cAACsB,EAAA,EAAD,CACEC,MAAOC,EACP9B,OAAQ,SAAA+B,GAKN,MAJuB,iBAAZL,IACTA,EAAWA,EAASM,MAAM,KAAKC,IAAI,SAAAC,GAAC,OAAIA,EAAEC,UAE5CZ,EAAcA,GAAeQ,EAAKK,KAAKC,aAAad,YAElDI,EAAAtB,EAAAC,cAACgC,EAAAjC,EAAD,CACEkC,eAAgB,CACdf,QAEFZ,MAAOA,EACP4B,cAAa,QAAUT,EAAKK,KAAKC,aAAaI,QAC9ChB,KAAM,CACJ,CACEjB,KAAM,cACNkC,QAASnB,GAEX,CACEoB,SAAU,WACVD,QAAS9B,GAEX,CACE+B,SAAU,iBACVD,QAASnB,GAEX,CACEoB,SAAU,UACVD,QAAS,WAEX,CACElC,KAAM,eACNkC,QAAS,WAEX,CACElC,KAAM,kBACNkC,QAASX,EAAKK,KAAKC,aAAaO,QAElC,CACEpC,KAAM,gBACNkC,QAAS9B,GAEX,CACEJ,KAAM,sBACNkC,QAASnB,IAGVsB,OACCnB,EACI,CACElB,KAAM,WACNkC,QAAShB,EAASoB,KAAK,OAEzB,IAELD,OAAOpB,MAxDlBM,KAAAgB,IAgEJ1B,EAAI2B,aAAe,CACjBxB,KAAM,KACNC,KAAM,GACNC,SAAU,MAGZL,EAAI4B,UAAY,CACd1B,YAAa2B,IAAUC,OACvB3B,KAAM0B,IAAUC,OAChB1B,KAAMyB,IAAUE,MAChB1B,SAAUwB,IAAUG,UAAU,CAC5BH,IAAUC,OACVD,IAAUI,QAAQJ,IAAUC,UAE9BvC,MAAOsC,IAAUC,OAAOI,YAGXlC,MAEf,IAAMS,EAAY,wTCrFH,SAAS0B,IAChB,OAAQ7B,EAAAtB,EAAAC,cAACmD,EAAA,EAAD,CACJ5B,MAAK,aAWL7B,OAAQ,SAAA+B,GAAI,OAAIJ,EAAAtB,EAAAC,cAACoD,EAAArD,EAAD,CAAKsD,MAAO5B,EAAK6B,KAAKC,gBAAgBF,MAAOG,MAAO,CAACC,MAAM,WAZvEhC,KAAAiC,q4FCGZC,aAIG,SAASC,EAAT5C,GAAuC,IAAnB6C,EAAmB7C,EAAnB6C,OAAQC,EAAW9C,EAAX8C,UACzBC,EAAQF,EAAOlC,IAAI,SAAAqC,GAAA,IAAEC,EAAFD,EAAEC,KAAMC,EAARF,EAAQE,KAAR,OAAgBpE,EAAAC,EAAAC,cAAAmE,EAAA,GAAMC,IAAKF,EAAMG,GAAIJ,GAAMnE,EAAAC,EAAAC,cAAAsE,EAAAvE,EAAA,CAAMwE,KAAML,EAAOV,MAAO,CAAEgB,SAAU,OAAQC,WAAW,GAAIC,MAAO,4BACxI,OACI5E,EAAAC,EAAAC,cAAC2D,EAAD,CAAQH,MAAO,CAAEmB,UAAW,WACxB7E,EAAAC,EAAAC,cAAA,WAAM8D,EAAUhE,EAAAC,EAAAC,cAAA,OAAKwD,MAAO,CAACC,MAAM,UAAWM,KAK3C,SAASa,EAAWxF,GACjC,OAAIA,EAAMyE,OACC/D,EAAAC,EAAAC,cAAC4D,EAAcxE,GAEnBU,EAAAC,EAAAC,cAAC6E,EAAA,EAAD,CACPtD,MAAK,aAWL7B,OAAQ,SAAAoF,GAAA,IAAAC,EAAAD,EAAEE,OAAQnB,EAAVkB,EAAUlB,OAAQC,EAAlBiB,EAAkBjB,UAAlB,OAAkChE,EAAAC,EAAAC,cAAC4D,EAADqB,OAAAC,OAAA,CAAWrB,OAAQA,EAAQC,UAAWA,GAAe1E,KAZxFqC,KAAA0D,mDCjBPC,aAIK,SAASC,EAATrE,GAA6B,IAALsE,EAAKtE,EAALsE,IAC3B,OACExF,EAAAC,EAAAC,cAACoF,EAAD,CAAQ/E,UAAU,kBAChBP,EAAAC,EAAAC,cAAAmE,EAAA,GAAME,GAAG,KAAKvE,EAAAC,EAAAC,cAAAsD,EAAA,SACdxD,EAAAC,EAAAC,cAAAuF,EAAAxF,EAAA,CACIyF,MAAM,OACNC,KAAK,aACLC,oBAAsBJ,EAAIK,OAAO,SAAA/D,GAAC,OAAEA,EAAEgE,WAAUjE,IAAI,SAAAC,GAAC,OAAEA,EAAEiE,OACzDrC,MAAO,CAAEsC,WAAY,SAGrBR,EAAI3D,IAAI,SAAAqC,EAAe+B,GAAf,IAAEC,EAAFhC,EAAEgC,KAAMH,EAAR7B,EAAQ6B,KAAR,OACN/F,EAAAC,EAAAC,cAAAuF,EAAAxF,EAAMkG,KAAN,CAAW7B,IAAK2B,GACdjG,EAAAC,EAAAC,cAAAmE,EAAA,GAAME,GAAI2B,GAAQ,KAAOH,QAS1B,SAASK,EAAkB9G,GACtC,OAAIA,EAAMkG,IACCxF,EAAAC,EAAAC,cAACqF,EAAkBjG,GAEvBU,EAAAC,EAAAC,cAAC6E,EAAA,EAAD,CACPtD,MAAK,aAUL7B,OAAQ,SAAAoF,GAAA,IAAUQ,EAAVR,EAAEE,OAAQM,IAAV,OAAoBxF,EAAAC,EAAAC,cAACqF,EAADJ,OAAAC,OAAA,CAAeI,IAAKA,GAASlG,KAXlDqC,KAAA0E,6EC5BTC,cAASC,YAIJ,SAASC,EAAMlH,GAAM,IACnBoE,EAA6BpE,EAA7BoE,MAAO+C,EAAsBnH,EAAtBmH,SAAaC,EADD3G,IACUT,EADV,sBAExB,OACIU,EAAAC,EAAAC,cAACoG,EAADnB,OAAAC,OAAA,CAAS1B,MAAOyB,OAAOC,OAAO,CAAEuB,QAAS,YAAcjD,IAAYgD,GAC9DD,GAgBE,SAASG,EAAWtH,GAAM,IAChCmH,EAC0CnH,EAD1CmH,SAAUlG,EACgCjB,EADhCiB,UACfC,EAA+ClB,EAA/CkB,MAAOW,EAAwC7B,EAAxC6B,YAAaG,EAA2BhC,EAA3BgC,SAAUoC,EAAiBpE,EAAjBoE,MAAO/D,EAAUL,EAAVK,OAFAkH,EAGV1B,OAAOC,OAAO,GAAI0B,EAAsBnH,GAA9DoH,EAHgCF,EAGhCE,OAAQC,EAHwBH,EAGxBG,WACTC,EAAc9B,OAAOC,OAAO,GAAI4B,EAAW,CAACE,OAAO,QAAQ,KAAMxD,GACjEyD,GAAiB5G,EAAWA,EAAY,IAAM,IAAM,cAC1D,OACEP,EAAAC,EAAAC,cAAAkH,EAAAnH,EAAA,CAAQM,UAAW4G,EAAezD,MAAOuD,GACvCjH,EAAAC,EAAAC,cAAAmH,EAAA,GAAK7G,MAAOA,EAAOc,SAAUA,EAAUH,YAAaA,IACpDnB,EAAAC,EAAAC,cAAAkG,EAAA,MACGK,EACFM,EAAQ/G,EAAAC,EAAAC,cAAA4E,EAAA,MAAU,MAKzB,IAAMgC,EAAuB,CAC3BC,QAAQ,GAGVH,EAAWJ,MAAQA,EACnBI,EAAWU,cAhCJ,SAAApG,GAAwC,IAAhBuF,EAAgBvF,EAAhBuF,SAAUc,EAAMrG,EAANqG,KACrC,OACEvH,EAAAC,EAAAC,cAAAkH,EAAAnH,EAAA,CAAQyD,MAAO,CAAEiD,QAAS,QAASa,WAAY,OAAQC,UAAW,MAChEzH,EAAAC,EAAAC,cAACqG,EAAD,CAAOmB,MAAO,KACXH,GAEHvH,EAAAC,EAAAC,cAACsG,EAAD,KAAQC,gJCpBhBkB,IAAkBC,iBAAiB,aAAcC,KACjDF,IAAkBC,iBAAiB,KAAME,KACzCH,IAAkBC,iBAAiB,WAAYG,KAC/CJ,IAAkBC,iBAAiB,OAAQI,KAC3CL,IAAkBC,iBAAiB,aAAcK,gDCT1C,IAKDC,EAAW,CAACpI,WALQ,CACtBqI,KDYW,SAAc7I,GACzB,IAAI8B,EAAO,OACX,GAAI9B,EAAMiB,UAAU,CAClB,IAAMH,EAAOd,EAAMiB,UAAUqB,MAAM,KAC/BxB,EAAKgI,OAAS,IAChBhH,EAAOhB,EAAK,IAIhB,OAAOJ,EAAAC,EAAAC,cAACmI,EAAA,EAAD,CAAmBC,SAAUlH,EAAMsC,MAAOA,UAAQpE,EAAMmH,WCpB/DxG,EAAGoE,EAAA,IAKQ,SAASkE,EAAIjJ,GAAM,IAAAuH,EACC1B,OAAOC,OAAO,GAAI8C,EAAU5I,GAApDQ,EADuB+G,EACvB/G,WAAY2G,EADWI,EACXJ,SAEnB,OACAzG,EAAAC,EAAAC,cAACC,EAAA,YAAD,CAAaL,WAAYA,GACpB2G,mHCZHD,UAAQgC,EAAA,EAAOhC,OAEN,SAASiC,EAATvH,GAAmD,IAAvBuF,EAAuBvF,EAAvBuF,SAAUiC,EAAaxH,EAAbwH,YAC7CC,EAAUxD,OAAOC,OAAO,CAACwD,YAAY,IAAKF,GAC1CpJ,EAAQ6F,OAAOC,OAAO,GAAI,CAACzF,OAAOgJ,EAAQhJ,QAASgJ,EAAQC,aACjE,OACEC,EAAA5I,EAAAC,cAAAsI,EAAA,EAAYlJ,EACVuJ,EAAA5I,EAAAC,cAACsG,EAAD,CAAO9C,MAAO,CAAEoF,WAAY,QACzBxJ,EAAMkB,MAAOqI,EAAA5I,EAAAC,cAAA,UAAKZ,EAAMkB,OAAY,KACrCqI,EAAA5I,EAAAC,cAAA6I,EAAA,OAAMtC","file":"component---src-generated-posts-terraform-python-js-52a8165fd79c72093ed3.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nconst layoutProps = {};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = null;\n  }\n\n  render() {\n    const {\n      components,\n      ...props\n    } = this.props;\n    return <MDXTag name=\"wrapper\" components={components}><MDXTag name=\"p\" components={components}>{`Terraform is a great tool to configure infrastructure, but, at certain level of project complexity, Terraform configuration management becomes an issue. It is easy to start your project simple, but, as it grows, you need to create more and more resources: for production, dev and staging environment, for different regions and cloud providers, for individual clients. All these environments need to be similar, though still may vary slightly. There are different approaches to address growing complexity in Terraform. One may manage all infrastructure through the single module, which becomes a single source of truth, and helps to achieve uniformity and avoid code duplication. On the downside, this tightly couples all the infrastructure in a project and doesn't scale well beyond certain project complexity. The next logical step is to split project into many subprojects. But as soon as configuration and Terraform states are splitted into independent subprojects, there arise the need to manage and coordinate them. When it comes to multiple configurations, Terraform internal capabilities are limited enough, which made tools like Terragrunt very popular. While extending some Terraform capabilities, Terragrunt still is quite limited. After all, the real root of the problem lies in the fact, that as convenient for infrastructure definitions as HCL (a configuration language used in both Terragrunt and Terraform) is, it is not as flexible and powerful, as a general purpose language. And that is when Python could be very helpful.`}</MDXTag>\n      <MDXTag name=\"h1\" components={components}>{`Configuration generation`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`In Terraform you may specify configuration not only using HCL configuration language, but using JSON files as well. And, as you know, Python has a lot of tooling to work with JSON. Not a surprise, there have been developed many libraries allowing to define Terraform artifacts directly in Python. One of them, `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://pypi.org/project/terraformpy/\"\n        }}>{`terraformpy`}</MDXTag>{` allows to create Terraform artifacts using syntax nearly identical to HCL:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-python\"\n        }}>{`    Resource(\n        'aws_instance', 'example',\n        ami=ami.id,\n        instance_type='m4.xlarge'\n    )\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Using such library, one may easily define entire configuration in Python. Or, even better, one just can use it to combine/orchestrate existing Terraform modules.`}</MDXTag>\n      <MDXTag name=\"h1\" components={components}>{`Managing Terraform modules`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`To provision even simplest project, one may need to create a lot of interdependent resources. Wiring them together could be a challenging endeavor. To make life of developers easier, there have been developed many configurable, open source Terraform modules. Such modules could be found on Github and/or in Terraform Registry. When working with yor infrastructure, your configuration often relies on many such modules, coming from different sources. To organize and manage such modules, I usually place them in a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`modules`}</MDXTag>{` folder, and describe/update using `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terrafile.yaml`}</MDXTag>{`:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-yaml\"\n        }}>{`aws-vps:\n  name: terraform-aws-modules-vpc\n  source: terraform-aws-modules/vpc/aws\n  version: \"2.44.0\"\naws-ecs:\n  name: terraform-aws-modules-ecs\n  source: terraform-aws-modules/ecs/aws\n  version: \"2.3.0\"\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The keys in a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terrafile.yaml`}</MDXTag>{` file serve as short module IDs, names (if given) specify exact module directory name. `}<MDXTag name=\"em\" components={components} parentName=\"p\">{`Source`}</MDXTag>{` may contain Github URL, Terraform Registry name, or local file path. A simple utility class could be used to check/update/download modules when necessary (see `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://github.com/act-labs/terraform-python\",\n          \"title\": \"Terraform - Python orchestration\"\n        }}>{`source code`}</MDXTag>{`):`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-python\"\n        }}>{`from terraformy.terrafile import Terrafile\nterrafile = Terrafile()\nterrafile.update()\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"h1\" components={components}>{`Managing multiple Terraform states`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`I usually place all top level Terraform modules (modules with state) into `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`state`}</MDXTag>{` subdirectories, to distinguish them from reusable modules, located in `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`modules`}</MDXTag>{` directory. I try to keep such modules simple, generating them based on some configuration. For example, a simple helper class below is able to generate Terraform configuration and invoke corresponding Terraform commands in appropriate subdirectories:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-python\"\n        }}>{`class RootModule:\n    name: str\n    state_dir: str\n    terrafile: Terrafile\n    config: Iterable[TerraformConfig]\n\n    def __init__(self, name: str, terrafile: Terrafile, config: Iterable[TerraformConfig]):\n        self.name = name\n        self.config = config\n        self.terrafile = terrafile\n        self.state_dir = \"./state/{}\".format(name)\n\n    def insure_dir_exists(self):\n        pathlib.Path(self.state_dir).mkdir(parents=True, exist_ok=True)\n\n    def generate_config(self):\n        self.insure_dir_exists()\n        for conf in self.config:\n            conf.config()\n            with open(\"{}/{}.yaml\".format(self.state_dir, conf.name), 'w') as file:\n                yaml.dump(conf.dict(), file)\n\n        print(\"terraformpy - Writing main.tf.json\")\n\n        with open(\"{}/main.tf.json\".format(self.state_dir), \"w\") as fd:\n            json.dump(compile(), fd, indent=4, sort_keys=True)\n\n    def init(self, **kwargs):\n        self.insure_dir_exists()\n        return exec('terraform', 'init', cwd=self.state_dir, **kwargs)\n\n    def plan(self, **kwargs):\n        self.insure_dir_exists()\n        return exec('terraform', 'plan', '-out=plan.saved', cwd=self.state_dir, **kwargs)\n\n    def apply(self, **kwargs):\n        self.insure_dir_exists()\n        return exec('terraform', 'apply', '-auto-approve', cwd=self.state_dir, **kwargs)\n\n    def destroy(self, **kwargs):\n        self.insure_dir_exists()\n        return exec('terraform', 'destroy', '-auto-approve', cwd=self.state_dir, **kwargs)\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"h1\" components={components}>{`Defining Terraform configuration`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`To generate a new Terraform configuration, define a new class subclassing `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`BaseConfig`}</MDXTag>{` class:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-python\"\n        }}>{`from pydantic import BaseModel\nimport abc\n\nclass TerraformConfig(abc.ABC):\n    name: str\n    @abc.abstractmethod\n    def config(self):\n        pass\n\n    @abc.abstractmethod\n    def dict(self):\n        pass\n\nclass BaseConfig(BaseModel, TerraformConfig):\n    terrafile: Terrafile\n\n    def module(self, name):\n        dir = name\n\n        if name in self.terrafile.entries and self.terrafile.entries[name].name:\n            dir = self.terrafile.entries[name].name\n\n        return \"../../modules/{}\".format(dir)\n\n    class Config:\n        arbitrary_types_allowed = True\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`BaseConfig`}</MDXTag>{` above defines certain protocol (`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`config`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`dict`}</MDXTag>{` methods and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`name`}</MDXTag>{` field), provides `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`pydantic`}</MDXTag>{` validation and helper methods (`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`module`}</MDXTag>{` method returns a relative path to a module based on a short id from `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terrafile.yaml`}</MDXTag>{`). For example, the configuration, responsible to create AWS VPC with the help of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`terraform-aws-modules/vpc/aws`}</MDXTag>{` module, could be defined as follows:`}</MDXTag>\n      <MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\n          \"className\": \"language-python\"\n        }}>{`from terraformpy import Module, Provider\n\nfrom terraformy.config import BaseConfig\n\nclass MyVpc(BaseConfig):\n    name: str\n    region: str = \"eu-west-2\"\n    private_number: int = 2\n    public_number: int = 2\n\n    def config(self):\n        name = self.name\n        region = self.region\n        private_number = self.private_number\n        public_number = self.public_number\n\n        Provider(\"aws\", region=region)\n        params = dict(\n            source=self.module(\"aws-vps\"),\n            name=name,\n            cidr=\"10.0.0.0/16\",\n            azs=[region + \"a\", region + \"b\"],\n            private_subnets=[\n                \"10.0.{}.0/24\".format(k) for k in range(1, private_number + 1)\n            ],\n            public_subnets=[\n                \"10.0.10{}.0/24\".format(k) for k in range(1, public_number + 1)\n            ],\n            enable_ipv6=\"true\",\n            enable_nat_gateway=\"true\",\n            single_nat_gateway=\"true\",\n            public_subnet_tags={\"Name\": \"overridden-name-public\"},\n            tags={\"Owner\": \"user\", \"Environment\": \"dev\"},\n            vpc_tags={\"Name\": name},\n        )\n\n        Module(name, **params)\n`}</MDXTag></MDXTag>\n      <MDXTag name=\"h1\" components={components}>{`The best of both worlds`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Using Python in combination with Terraform modules, we are able to leverage both open source Terraform modules and the power of Python. We may use Terraform declarative HCL definitions. And we have access to all Python capabilities: `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`*.yaml`}</MDXTag>{` and `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`*.json`}</MDXTag>{` config files, schema validation, tools to create CLI and/or REST APIs, etc.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Find the source code used in this blog on `}<MDXTag name=\"a\" components={components} parentName=\"p\" props={{\n          \"href\": \"https://github.com/act-labs/terraform-python\",\n          \"title\": \"Terraform - Python orchestration\"\n        }}>{`Github`}</MDXTag>{`.`}</MDXTag>\n           </MDXTag>;\n  }\n\n}\nexport const _frontmatter = {\n  \"title\": \"Terraform - Python orchestration\",\n  \"keywords\": \"Terraform, Python\",\n  \"order\": -20\n};\n    ","import React from \"react\";\r\nimport ContentComponent from 'D:/projects/flash/packages/act-labs-blog/src/content/posts/terraform-python.md';\r\nimport OneColumnLayout from 'components/page-layout';\r\n\r\nexport default function SnippetsLayout(props) {\r\n    return <OneColumnLayout {...props}><ContentComponent {...props}/></OneColumnLayout>\r\n}\r\n\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Helmet from 'react-helmet'\r\nimport { StaticQuery, graphql } from 'gatsby'\r\n\r\nfunction SEO({ description, lang, meta, keywords, title }) {\r\n  return (\r\n    <StaticQuery\r\n      query={detailsQuery}\r\n      render={data => {\r\n        if (typeof keywords == \"string\"){\r\n          keywords = keywords.split(\",\").map(v => v.trim());\r\n        }\r\n        description = description || data.site.siteMetadata.description\r\n        return (\r\n          <Helmet\r\n            htmlAttributes={{\r\n              lang,\r\n            }}\r\n            title={title}\r\n            titleTemplate={`%s | ${data.site.siteMetadata.project}`}\r\n            meta={[\r\n              {\r\n                name: 'description',\r\n                content: description,\r\n              },\r\n              {\r\n                property: 'og:title',\r\n                content: title,\r\n              },\r\n              {\r\n                property: 'og:description',\r\n                content: description,\r\n              },\r\n              {\r\n                property: 'og:type',\r\n                content: 'website',\r\n              },\r\n              {\r\n                name: 'twitter:card',\r\n                content: 'summary',\r\n              },\r\n              {\r\n                name: 'twitter:creator',\r\n                content: data.site.siteMetadata.author,\r\n              },\r\n              {\r\n                name: 'twitter:title',\r\n                content: title,\r\n              },\r\n              {\r\n                name: 'twitter:description',\r\n                content: description,\r\n              },\r\n            ]\r\n              .concat(\r\n                keywords\r\n                  ? {\r\n                      name: 'keywords',\r\n                      content: keywords.join(', '),\r\n                    }\r\n                  : []\r\n              )\r\n              .concat(meta)}\r\n          />\r\n        )\r\n      }}\r\n    />\r\n  )\r\n}\r\n\r\nSEO.defaultProps = {\r\n  lang: 'en',\r\n  meta: [],\r\n  keywords: null,\r\n}\r\n\r\nSEO.propTypes = {\r\n  description: PropTypes.string,\r\n  lang: PropTypes.string,\r\n  meta: PropTypes.array,\r\n  keywords: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.arrayOf(PropTypes.string)\r\n  ]),\r\n  title: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default SEO\r\n\r\nconst detailsQuery = graphql`\r\n  query DefaultSEOQuery {\r\n    site {\r\n      siteMetadata {\r\n        project\r\n        description\r\n        author\r\n      }\r\n    }\r\n  }\r\n`\r\n","import React from 'react'\r\nimport { StaticQuery, graphql } from 'gatsby'\r\nimport Img from 'gatsby-image'\r\n\r\n\r\nexport default function Logo(){\r\n        return (<StaticQuery\r\n            query={graphql`\r\n                query {\r\n                    logo: file(relativePath: { eq: \"logo.png\" }) {\r\n                    childImageSharp {\r\n                        fixed(height: 60) {\r\n                        ...GatsbyImageSharpFixed\r\n                        }\r\n                    }\r\n                    }\r\n                }\r\n            `}\r\n            render={data => <Img fixed={data.logo.childImageSharp.fixed} style={{float:\"left\"}}/>}\r\n        />)\r\n    }\r\n\r\n","import React from \"react\"\r\nimport { StaticQuery, graphql } from 'gatsby'\r\n\r\nimport {Link} from \"actb\";\r\nimport {\r\n    Layout, Icon\r\n  } from 'antd';\r\n  \r\n  const {\r\n    Footer\r\n  } = Layout;\r\n\r\n\r\nexport function ActFooter({social, copyright}){\r\n    const icons = social.map(({link, icon})=><Link key={icon} to={link}><Icon type={icon}  style={{ fontSize: '24px', marginLeft:10, color: 'rgba(0, 0, 0, 0.65)'}} /></Link>)\r\n    return (\r\n        <Footer style={{ textAlign: 'center' }}>\r\n            <div>{copyright}<div style={{float:\"right\"}}>{icons}</div></div>\r\n        </Footer>\r\n    )\r\n}\r\n\r\nexport default function SiteFooter(props){\r\n  if (props.social){\r\n      return <ActFooter {...props}/>\r\n  }\r\n  return <StaticQuery\r\n  query={graphql`\r\n    query {\r\n      config: configYaml(fields:{slug: {eq:\"/config/main/\"}}){\r\n          copyright\r\n          social {\r\n              icon\r\n              link\r\n          }        \r\n      }\r\n    }\r\n  `}\r\n  render={({config:{social, copyright}}) => <ActFooter social={social} copyright={copyright} {...props} />}\r\n/>\r\n}  ","import React from \"react\";\r\nimport {Logo, Link} from \"actb\"\r\nimport { StaticQuery, graphql } from 'gatsby'\r\n\r\nimport {\r\n  Layout, Menu\r\n} from 'antd';\r\n  \r\nconst {\r\n  Header\r\n} = Layout;\r\n\r\n\r\nexport function NavigationBar({nav}){  \r\n    return (\r\n      <Header className=\"navigation-bar\">\r\n        <Link to=\"/\" ><Logo/></Link>\r\n        <Menu\r\n            theme=\"dark\"\r\n            mode=\"horizontal\"\r\n            defaultSelectedKeys={ nav.filter(v=>v.selected).map(v=>v.text) }\r\n            style={{ lineHeight: '64px' }}\r\n        >\r\n          {\r\n            nav.map(({slug, text}, i)=>\r\n              <Menu.Item key={i}>\r\n                <Link to={slug || \"/\"} >{text}</Link>\r\n              </Menu.Item>\r\n            )\r\n          }  \r\n        </Menu>\r\n      </Header>\r\n    )\r\n} \r\n\r\nexport default function SiteNavigationBar(props){\r\n    if (props.nav){\r\n        return <NavigationBar {...props}/>\r\n    }\r\n    return <StaticQuery\r\n    query={graphql`\r\n      query {\r\n        config: configYaml(fields:{slug: {eq:\"/config/main/\"}}){\r\n            nav {\r\n                text\r\n                slug\r\n            }        \r\n        }\r\n      }\r\n    `}\r\n    render={({config:{nav}}) => <NavigationBar nav={nav} {...props} />}\r\n  />\r\n}  ","import React from \"react\"\r\n\r\nimport {Seo, Footer, NavigationBar} from \"actb\";\r\n\r\nimport {\r\n    Layout\r\n  } from 'antd';\r\n  \r\nimport \"./layout.less\"\r\n\r\nconst {\r\n  Content, Sider\r\n} = Layout;\r\n\r\n\r\nexport function Panel(props){\r\n  const {style, children, ...other} = props\r\n    return (\r\n        <Content style={Object.assign({ padding: '5px 24px' }, style)} {...other}>\r\n            {children}                     \r\n        </Content>\r\n    )\r\n}\r\n\r\nexport function SideMenuPanel({children, menu}){\r\n    return (\r\n      <Layout style={{ padding: '1em 0', background: '#fff', minHeight: 1000 }}>\r\n        <Sider width={200}>\r\n          {menu}\r\n        </Sider>\r\n        <Panel>{children}</Panel>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\nexport default function PageLayout(props){\r\n  const {children, className, \r\n    title, description, keywords, style, layout} = props\r\n  const {footer, fullHeight} = Object.assign({}, defaultLayoutOptions, layout)\r\n  const layoutStyle = Object.assign({}, fullHeight?{height:\"100%\"}:null, style)\r\n  const pageClassName = (className? className + \" \" : \"\") + \"page-layout\"\r\n  return (\r\n    <Layout className={pageClassName} style={layoutStyle}>\r\n      <Seo title={title} keywords={keywords} description={description} />\r\n      <NavigationBar/>\r\n        {children}\r\n      {footer? <Footer/>:null}\r\n    </Layout>\r\n  );  \r\n}\r\n\r\nconst defaultLayoutOptions = {\r\n  footer: true\r\n}\r\n\r\nPageLayout.Panel = Panel;\r\nPageLayout.SideMenuPanel = SideMenuPanel; \r\n","import React from \"react\";\r\nimport { Light as SyntaxHighlighter } from \"react-syntax-highlighter\";\r\nimport js from 'react-syntax-highlighter/dist/esm/languages/hljs/javascript';\r\nimport bash from 'react-syntax-highlighter/dist/esm/languages/hljs/bash';\r\nimport markdown from 'react-syntax-highlighter/dist/esm/languages/hljs/markdown';\r\nimport yaml from 'react-syntax-highlighter/dist/esm/languages/hljs/yaml';\r\nimport dockerfile from 'react-syntax-highlighter/dist/esm/languages/hljs/dockerfile';\r\n\r\nimport { github as style } from 'react-syntax-highlighter/dist/styles/hljs';\r\n\r\nSyntaxHighlighter.registerLanguage('javascript', js);\r\nSyntaxHighlighter.registerLanguage('sh', bash);\r\nSyntaxHighlighter.registerLanguage('markdown', markdown);\r\nSyntaxHighlighter.registerLanguage('yaml', yaml);\r\nSyntaxHighlighter.registerLanguage('dockerfile', dockerfile);\r\n\r\nexport {SyntaxHighlighter};\r\n\r\nexport default function Code(props) {\r\n    let lang = 'bash'\r\n    if (props.className){\r\n      const name = props.className.split(\"-\");\r\n      if (name.length > 1){\r\n        lang = name[1]\r\n      }\r\n    }\r\n  \r\n    return <SyntaxHighlighter language={lang} style={style}>{props.children}</SyntaxHighlighter>\r\n}","import React from \"react\";\r\nimport { MDXProvider } from '@mdx-js/tag';\r\n\r\nimport {Code, Link} from \"actb\";\r\n\r\nexport const components = {\r\n    code: Code,\r\n    a: Link\r\n  };\r\n  \r\nconst defaults = {components}; \r\n\r\nexport default function MDX(props){\r\n    const {components, children} = Object.assign({}, defaults, props);\r\n\r\n    return (\r\n    <MDXProvider components={components}>\r\n        {children}\r\n    </MDXProvider>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nimport {Mdx, Layout} from \"actb\"\r\nimport '../actb/layout/simple.css'\r\n\r\nconst Panel = Layout.Panel\r\n\r\nexport default function DefaultSiteLayout({children, pageContext}){\r\n  const context = Object.assign({frontmatter:{}}, pageContext)\r\n  const props = Object.assign({}, {layout:context.layout}, context.frontmatter);\r\n  return (\r\n    <Layout {...props}>\r\n      <Panel style={{ paddingTop: \"1em\"}}>\r\n        {props.title? <h1>{props.title}</h1>:null}\r\n        <Mdx>{children}</Mdx>\r\n      </Panel>\r\n    </Layout>\r\n  )\r\n}\r\n\r\n\r\n"],"sourceRoot":""}